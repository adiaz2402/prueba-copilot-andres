<div class="container">
  <h1>Product Management</h1>
  <div *ngIf="loading" class="loading">Cargando productos...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <div class="product-list">
    <div *ngFor="let product of products" class="product-item">
      <ng-container *ngIf="editingProduct?.id !== product.id; else editBlock">
        <span>{{ product.name }} - ${{ product.price }}</span>
        <div class="product-actions">
          <button (click)="startEdit(product)">Editar</button>
          <button class="delete" (click)="deleteProduct(product.id)">Eliminar</button>
        </div>
      </ng-container>
      <ng-template #editBlock>
        <div class="edit-row">
          <input class="form-input" [(ngModel)]="editedProduct.name" placeholder="Nombre" />
          <input class="form-input" [(ngModel)]="editedProduct.price" type="number" placeholder="Precio" />
          <div class="product-actions">
            <button (click)="saveEdit(product)">Guardar</button>
            <button class="delete" (click)="cancelEdit()">Cancelar</button>
          </div>
        </div>
      </ng-template>
    </div>
  </div>

  <form (ngSubmit)="addProduct()">
    <input class="form-input" [(ngModel)]="newProduct.name" name="name" placeholder="Nombre" required />
    <input class="form-input" [(ngModel)]="newProduct.price" name="price" type="number" placeholder="Precio" required />
    <button type="submit">Agregar Producto</button>
  </form>
</div>
